{% extends "base.html" %}


{% block extra_head %}
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>
{% endblock %}

{% block content %}
<div class="section" ng-app="">
    <div class="container">
        <h1>My Profile</h1>

        <div class="profile-container">
            <!-- Profile Information -->
            <div class="profile-card">
                <h3>Profile Information</h3>

                <form method="POST" action="{{ url_for('profile') }}" class="profile-form">
                    <div class="form-group">
                        <label for="username">Username</label>
                        <input type="text" id="username" value="{{ user.username }}" class="form-control" disabled>
                        <small class="text-muted">Username cannot be changed</small>
                    </div>

                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" value="{{ user.email }}" class="form-control"
                            required>
                    </div>

                    <div class="form-group">
                        <label for="display_name">Display Name</label>
                        <input type="text" id="display_name" name="display_name" value="{{ user.display_name }}"
                            class="form-control">
                    </div>

                    <button type="submit" class="btn btn-primary">Update Profile</button>
                </form>

                <div class="profile-display">
                    <h4>Current Display Name:</h4>
                    <p class="display-name-preview">Welcome, <strong>{{ user.display_name }}</strong>!</p>
                </div>
            </div>

            <!-- Account Stats -->
            <div class="profile-card">
                <h3>Account Information</h3>
                <div class="account-stats">
                    <div class="stat-item">
                        <div class="stat-label">Account Balance</div>
                        <div class="stat-value">${{ "%.2f"|format(user.balance) }}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Member Since</div>
                        <div class="stat-value">{{ user.created_at.strftime('%Y-%m-%d') if user.created_at else 'N/A' }}
                        </div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Last Login</div>
                        <div class="stat-value">{{ user.last_login.strftime('%Y-%m-%d %H:%M') if user.last_login else
                            'Never' }}</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-label">Account Status</div>
                        <div class="stat-value">
                            {% if user.is_active %}
                            <span class="badge badge-success">Active</span>
                            {% else %}
                            <span class="badge badge-danger">Inactive</span>
                            {% endif %}
                            {% if user.is_admin %}
                            <span class="badge badge-primary">Admin</span>
                            {% endif %}
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Links -->
        <div class="profile-links">
            <a href="{{ url_for('order_history') }}" class="btn btn-outline">My Orders</a>
            <a href="{{ url_for('wishlist') }}" class="btn btn-outline">My Wishlist</a>
            <a href="{{ url_for('view_cart') }}" class="btn btn-outline">Shopping Cart</a>
        </div>
    </div>
</div>
{% endblock %}